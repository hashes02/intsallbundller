<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:AppBundle.Avalonia.ViewModels"
        x:Class="AppBundle.Avalonia.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Ninite Clone - Batch Installer"
        Width="600" Height="500"
        CanResize="False"
        WindowStartupLocation="CenterScreen"
        Background="#FFF5F5F5">

    <Grid RowDefinitions="80,*">
        
        <!-- Header -->
        <Border Grid.Row="0" Background="#FF0066CC">
            <StackPanel Orientation="Horizontal" 
                        VerticalAlignment="Center" 
                        Margin="30,0">
                <!-- Logo Placeholder -->
                <Border Width="48" Height="48" 
                        Background="#FFFFFF" 
                        CornerRadius="8"
                        Margin="0,0,12,0">
                    <TextBlock Text="ðŸ“¦" 
                               FontSize="32" 
                               HorizontalAlignment="Center" 
                               VerticalAlignment="Center"/>
                </Border>
                
                <TextBlock Text="Ninite Clone" 
                           FontSize="24" 
                           FontWeight="SemiBold" 
                           Foreground="White" 
                           VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Wizard Content -->
        <TabControl Grid.Row="1" 
                    SelectedIndex="{Binding CurrentPage}"
                    Background="Transparent"
                    BorderThickness="0"
                    Margin="0,20,0,0">
            
            <TabControl.Styles>
                <Style Selector="TabControl">
                    <Setter Property="TabStripPlacement" Value="Bottom"/>
                </Style>
                <Style Selector="TabItem">
                    <Setter Property="IsEnabled" Value="False"/>
                    <Setter Property="IsVisible" Value="False"/>
                </Style>
            </TabControl.Styles>

            <!-- Page 0: Welcome -->
            <TabItem>
                <StackPanel Margin="40" Spacing="20">
                    <TextBlock Text="Welcome to Ninite Clone" 
                               FontSize="22" 
                               FontWeight="Medium"/>
                    
                    <TextBlock Text="Select your apps below and we'll handle the rest â€“ latest versions, no junk." 
                               TextWrapping="Wrap" 
                               FontSize="14" 
                               Foreground="#FF555555"/>
                    
                    <Border Height="200"/>
                    
                    <StackPanel Orientation="Horizontal" 
                                HorizontalAlignment="Right" 
                                Spacing="12">
                        <Button Content="Cancel" 
                                Command="{Binding CancelCommand}" 
                                Width="90"/>
                        <Button Content="Next >" 
                                Command="{Binding NextCommand}" 
                                Classes="primary"
                                Width="90"/>
                    </StackPanel>
                </StackPanel>
            </TabItem>

            <!-- Page 1: App Selection -->
            <TabItem>
                <StackPanel Margin="40" Spacing="20">
                    <TextBlock Text="Choose Apps to Install/Update" 
                               FontSize="22" 
                               FontWeight="Medium"/>
                    
                    <ScrollViewer VerticalScrollBarVisibility="Auto" 
                                  Height="250">
                        <ItemsControl ItemsSource="{Binding Apps}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Columns="2"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding IsSelected}" 
                                              Content="{Binding Name}" 
                                              Margin="10"
                                              FontSize="14"/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                    
                    <TextBlock Text="{Binding SelectedCount, StringFormat='Selected: {0} apps'}" 
                               FontSize="14" 
                               Foreground="#FF0066CC" 
                               HorizontalAlignment="Center"/>
                    
                    <StackPanel Orientation="Horizontal" 
                                HorizontalAlignment="Right" 
                                Spacing="12">
                        <Button Content="&lt; Back" 
                                Command="{Binding BackCommand}" 
                                Width="90"/>
                        <Button Content="Install" 
                                Command="{Binding InstallCommand}" 
                                IsEnabled="{Binding HasSelections}"
                                Classes="primary"
                                Width="90"/>
                    </StackPanel>
                </StackPanel>
            </TabItem>

            <!-- Page 2: Progress -->
            <TabItem>
                <StackPanel Margin="40" 
                            Spacing="30" 
                            VerticalAlignment="Center">
                    <TextBlock Text="Downloading &amp; Installing..." 
                               FontSize="22" 
                               FontWeight="Medium"
                               HorizontalAlignment="Center"/>
                    
                    <ProgressBar Value="{Binding OverallProgress}" 
                                 Minimum="0" 
                                 Maximum="100" 
                                 Height="12" 
                                 Width="400"
                                 IsIndeterminate="{Binding IsIndeterminate}"/>
                    
                    <TextBlock Text="{Binding StatusText}" 
                               HorizontalAlignment="Center" 
                               FontSize="13" 
                               Foreground="#FF555555"/>
                    
                    <ListBox ItemsSource="{Binding InstallLogs}" 
                             Height="100"
                             ScrollViewer.VerticalScrollBarVisibility="Auto"
                             Background="White"
                             BorderBrush="#FFCCCCCC"
                             BorderThickness="1"/>
                </StackPanel>
            </TabItem>

            <!-- Page 3: Finish -->
            <TabItem>
                <StackPanel Margin="40" 
                            Spacing="20" 
                            VerticalAlignment="Center">
                    <!-- Check Icon Placeholder -->
                    <Border Width="64" Height="64" 
                            Background="#FF10B981" 
                            CornerRadius="32"
                            HorizontalAlignment="Center">
                        <TextBlock Text="âœ“" 
                                   FontSize="48" 
                                   FontWeight="Bold"
                                   Foreground="White"
                                   HorizontalAlignment="Center" 
                                   VerticalAlignment="Center"/>
                    </Border>
                    
                    <TextBlock Text="All Done!" 
                               FontSize="24" 
                               FontWeight="SemiBold" 
                               HorizontalAlignment="Center"/>
                    
                    <TextBlock Text="{Binding SuccessMessage}" 
                               FontSize="14" 
                               HorizontalAlignment="Center" 
                               Foreground="#FF555555"
                               TextWrapping="Wrap"
                               TextAlignment="Center"/>
                    
                    <Border Height="40"/>
                    
                    <Button Content="Finish" 
                            Command="{Binding FinishCommand}" 
                            HorizontalAlignment="Center"
                            Classes="primary"
                            Width="100"/>
                </StackPanel>
            </TabItem>

        </TabControl>

    </Grid>

</Window>